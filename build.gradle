apply plugin: 'java'

repositories {
    mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    compile 'io.appium:java-client:5.0.4'
    compile 'org.testng:testng:6.14.2'
}

tasks.withType(JavaCompile) {
  options.compilerArgs << "-Xlint:unchecked" << "-Werror"
}

test {
    useTestNG() {
        dependsOn cleanTest
        if (project.hasProperty('suite')) {
            suites suite
        }
    }

    // set heap size for the test JVM(s)
    minHeapSize = "128m"
    maxHeapSize = "512m"

    beforeTest {
      descriptor -> logger.lifecycle("@beforTest: " + descriptor)
    }

    afterTest {
      descriptor,
      result -> logger.lifecycle("@afterTest: " + descriptor + " with result " + result.resultType)
    }

    onOutput {
      descriptor,
      event -> logger.lifecycle("Test " + descriptor + " out/err: " + event.message )
    }

    testLogging {
      events 'started', 'passed'
    }
}
